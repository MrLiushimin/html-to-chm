<!DOCTYPE html>

<html class="translated-ltr"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>LXD</title>
<link rel="stylesheet" type="text/css" href="../C.css">
<script type="text/javascript" src="../jquery.js"></script><script type="text/javascript" src="../jquery.syntax.js"></script><script type="text/javascript" src="../yelp.js"></script>
<link type="text/css" rel="stylesheet" charset="UTF-8" href="https://translate.googleapis.com/translate_static/css/translateelement.css"></head>
<body id="home">
<!--<script src="https://ssl.google-analytics.com/urchin.js" type="text/javascript"></script><script type="text/javascript">
        _uacct = "UA-1018242-8";
        urchinTracker();
      </script><script>
      function englishPageVersion() {
        var href = window.location.href;
        if (href.slice(-1) == "/") {
                window.location = "index.html.en";
        } else {
                window.location = href.replace(/\.html.*/, ".html.en");
        }
         return false;
      }
      function browserPreferredLanguage() {
        var href = window.location.href;
        if (href.slice(-1) == "/") {
                window.location = href;
        } else {
                window.location = href.replace(/\.html.*/, ".html");
        }
        return false;
      }
      </script>--><div id="container">
<div id="container-inner">
<div id="mothership"><ul>
<li><a href="https://partners.ubuntu.com"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">伙伴</font></font></a></li>
<li><a href="https://www.ubuntu.com/support/community-support"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">支持</font></font></a></li>
<li><a href="https://community.ubuntu.com"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">社区</font></font></a></li>
<li><a href="https://www.ubuntu.com"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ubuntu.com</font></font></a></li>
</ul></div>
<div id="header">
<h1 id="ubuntu-header"><a href="https://help.ubuntu.com/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ubuntu文档</font></font></a></h1>
<ul id="main-menu">
<li><a class="main-menu-item current" href="https://help.ubuntu.com/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">官方文件</font></font></a></li>
<li><a href="https://help.ubuntu.com/community/CommunityHelpWiki"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">社区帮助Wiki</font></font></a></li>
<li><a href="https://community.ubuntu.com/t/contribute/26"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">有助于</font></font></a></li>
</ul>
</div>
<div id="menu-search"><div id="search-box">
<noscript><form action="https://www.google.com/cse" id="cse-search-box"><div>
<input type="hidden" name="cx" value="003883529982892832976:e2vwumte3fq"><input type="hidden" name="ie" value="UTF-8"><input type="text" name="q" size="21"><input type="submit" name="sa" value="Search">
</div></form></noscript><!--
<script>
                document.write('<form action="https://help.ubuntu.com/search.html" id="cse-search-box">');
                document.write('  <div>');
                document.write('    <input type="hidden" name="cof" value="FORID:9">');
                document.write('    <input type="hidden" name="cx" value="003883529982892832976:e2vwumte3fq">');
                document.write('    <input type="hidden" name="ie" value="UTF-8">');
                document.write('    <input type="text" name="q" size="21">');
                document.write('    <input type="submit" name="sa" value="Search">');
                document.write('  </div>');
                document.write('</form>');
              </script>-->
</div></div>
<div class="trails"><div class="trail">
<a href="https://help.ubuntu.com/18.04" class="trail"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ubuntu 18.04</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;» </font></font><a class="trail" href="../index.html" title="Ubuntu服务器指南"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ubuntu服务器指南</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;» </font></font><a class="trail" href="virtualization.html" title="虚拟化"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">虚拟化</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> &nbsp;»</font></font></div></div>
<div id="cwt-content" class="clearfix content-area"><div id="page">
<div id="content">
<div class="links nextlinks">
<a class="nextlinks-prev" href="ubuntucloud.html" title="Ubuntu Cloud"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上一页</font></font></a><a class="nextlinks-next" href="lxc.html" title="LXC"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下一页</font></font></a>
</div>
<div class="hgroup"><h1 class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LXD</font></font></h1></div>
<div class="region">
<div class="contents">
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    LXD（发音为lex-dee）是轻量级容器管理程序或轻量级容器管理程序。</font><font style="vertical-align: inherit;">虽然这种说法一直存在争议，但</font><font style="vertical-align: inherit;">根据最初的学术论文</font><font style="vertical-align: inherit;">，它已经</font></font><a href="http://blog.dustinkirkland.com/2015/09/container-summit-presentation-and-live.html" class="ulink" title="http://blog.dustinkirkland.com/2015/09/container-summit-presentation-and-live.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">非常合理</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">它也很好地区分了LXD和</font></font><a href="lxc.html" class="ulink" title="https://help.ubuntu.com/lts/serverguide/lxc.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LXC</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
    </font></font></p>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    LXC（lex-see）是一个在本地系统上创建和管理“容器”的程序。</font><font style="vertical-align: inherit;">它还提供了一个API，允许更高级别的管理器（如LXD）管理容器。</font><font style="vertical-align: inherit;">从某种意义上说，可以将LXC与QEMU进行比较，同时将LXD与libvirt进行比较。
    </font></font></p>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    LXC API处理“容器”。</font><font style="vertical-align: inherit;">LXD API处理“遥控器”，它们为图像和容器提供服务。</font><font style="vertical-align: inherit;">这通过网络扩展了LXC功能，并允许对容器迁移和容器映像发布等任务进行简洁管理。
    </font></font></p>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
    LXD使用LXC进行一些容器管理任务。</font><font style="vertical-align: inherit;">但是，它保留了自己的容器配置信息并具有自己的约定，因此最好不要手动使用LXD容器的经典LXC命令。</font><font style="vertical-align: inherit;">本文档将重点介绍如何在Ubuntu系统上配置和管理LXD。
    </font></font></p>
</div>
<div class="links sectionlinks" role="navigation"><ul>
<li class="links"><a class="xref" href="lxd.html#lxd-resources" title="在线资源"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在线资源</font></font></a></li>
<li class="links"><a class="xref" href="lxd.html#lxd-installation" title="安装"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安装</font></font></a></li>
<li class="links"><a class="xref" href="lxd.html#lxd-kernel-prep" title=" 核心准备 "><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 核心准备 </font></font></a></li>
<li class="links"><a class="xref" href="lxd.html#lxd-configuration" title=" 组态 "><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 组态 </font></font></a></li>
<li class="links"><a class="xref" href="lxd.html#lxd-first-container" title=" 创建第一个容器 "><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 创建第一个容器 </font></font></a></li>
<li class="links"><a class="xref" href="lxd.html#lxd-server-config" title=" LXD服务器配置 "><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> LXD服务器配置 </font></font></a></li>
<li class="links"><a class="xref" href="lxd.html#lxd-container-config" title=" 容器配置 "><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 容器配置 </font></font></a></li>
<li class="links"><a class="xref" href="lxd.html#lxd-profiles" title=" 简介 "><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 简介 </font></font></a></li>
<li class="links"><a class="xref" href="lxd.html#lxd-nesting" title=" 嵌套 "><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 嵌套 </font></font></a></li>
<li class="links"><a class="xref" href="lxd.html#lxd-limits" title=" 范围 "><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 范围 </font></font></a></li>
<li class="links"><a class="xref" href="lxd.html#lxd-uid" title=" UID映射和特权容器 "><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> UID映射和特权容器 </font></font></a></li>
<li class="links"><a class="xref" href="lxd.html#lxd-aa" title=" AppArmor的 "><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> AppArmor的 </font></font></a></li>
<li class="links"><a class="xref" href="lxd.html#lxd-seccomp" title=" 的Seccomp "><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 的Seccomp </font></font></a></li>
<li class="links"><a class="xref" href="lxd.html" title=" 原始LXC配置 "><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 原始LXC配置 </font></font></a></li>
<li class="links"><a class="xref" href="lxd.html" title=" 图像和容器 "><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 图像和容器 </font></font></a></li>
<li class="links"><a class="xref" href="lxd.html#lxd-troubleshooting" title=" 故障排除 "><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 故障排除 </font></font></a></li>
</ul></div>
<div class="sect2 sect" id="lxd-resources"><div class="inner">
<div class="hgroup"><h2 class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在线资源</font></font></h2></div>
<div class="region"><div class="contents">
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">在线LXD自述</font><font style="vertical-align: inherit;">
      文件中有关于</font></font><a href="http://github.com/lxc/lxd" class="ulink" title="http://github.com/lxc/lxd"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">LXD入门的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">优秀文档</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">还有一个在线服务器，允许您</font></font><a href="http://linuxcontainers.org/lxd/try-it" class="ulink" title="http://linuxcontainers.org/lxd/try-it"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">远程尝试LXD</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">Stephane Graber还有一个</font><font style="vertical-align: inherit;">关于LXD 2.0 </font><font style="vertical-align: inherit;">的</font></font><a href="https://www.stgraber.org/2016/03/11/lxd-2-0-blog-post-series-012/" class="ulink" title="https://www.stgraber.org/2016/03/11/lxd-2-0-blog-post-series-012/"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">优秀博客系列</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">最后，有很多关于如何</font></font><a href="https://docs.jujucharms.com/devel/en/clouds-lxd" class="ulink" title="https://docs.jujucharms.com/devel/en/clouds-lxd"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">使用juju驱动lxd的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文档</font><font style="vertical-align: inherit;">。
      </font></font></p>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      本文档将提供特定于Ubuntu Server的LXD视图，重点关注管理。
      </font></font></p>
</div></div>
</div></div>
<div class="sect2 sect" id="lxd-installation"><div class="inner">
<div class="hgroup"><h2 class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">安装</font></font></h2></div>
<div class="region"><div class="contents">
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      LXD预安装在Ubuntu Server云端映像上。</font><font style="vertical-align: inherit;">在其他系统上，可以使用以下命令安装lxd软件包：
      </font></font></p>
<div class="screen"><pre class="contents "><span class="cmd command"><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
sudo apt install lxd</font></font><font></font>
</span>
</pre></div>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      这将安装LXD以及建议的依赖项，包括LXC库和lxcfs。
      </font></font></p>
</div></div>
</div></div>
<div class="sect2 sect" id="lxd-kernel-prep"><div class="inner">
<div class="hgroup"><h2 class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 核心准备 </font></font></h2></div>
<div class="region"><div class="contents"><p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      通常，Ubuntu 16.04应默认启用所有所需功能。</font><font style="vertical-align: inherit;">一个例外是，为了启用交换计费，</font><font style="vertical-align: inherit;">必须设置</font><font style="vertical-align: inherit;">引导参数</font></font><span class="cmd command"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">swapaccount = 1</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这可以通过将其附加到</font><font style="vertical-align: inherit;">/ etc / default / grub中</font><font style="vertical-align: inherit;">的</font></font><span class="cmd command"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">GRUB_CMDLINE_LINUX_DEFAULT =</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">变量，然后以root身份运行'update-grub'并重新启动来完成。
      </font></font></p></div></div>
</div></div>
<div class="sect2 sect" id="lxd-configuration"><div class="inner">
<div class="hgroup"><h2 class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 组态 </font></font></h2></div>
<div class="region"><div class="contents">
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      默认情况下，LXD安装在本地UNIX套接字上，LXD组的成员可以与之通信。</font><font style="vertical-align: inherit;">它没有信任密码设置。</font><font style="vertical-align: inherit;">它使用</font></font><span class="file filename"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ var / lib / lxd中</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的文件系统</font><font style="vertical-align: inherit;">来存储容器。</font><font style="vertical-align: inherit;">要使用不同的设置配置LXD，请使用</font></font><span class="cmd command"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">lxd init</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">这将允许您选择：
      </font></font></p>
<div class="list itemizedlist"><ul class="list itemizedlist">
<li class="list itemizedlist">
          <p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">目录或</font></font><a href="http://open-zfs.org" class="ulink" title="http://open-zfs.org"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ZFS</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">容器后端。</font><font style="vertical-align: inherit;">如果选择ZFS，则可以选择要使用的块设备，或者用作后备存储的文件大小。</font></font></p>
        </li>
<li class="list itemizedlist">
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">通过网络提供的可用性</font></font></p>
        </li>
<li class="list itemizedlist">
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">远程客户端用于保证其客户端证书的“信任密码”</font></font></p>
        </li>
</ul></div>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      您必须以root身份运行“lxd init”。</font><font style="vertical-align: inherit;">'lxc'命令可以作为组lxd成员的任何用户运行。</font><font style="vertical-align: inherit;">如果用户joe不是组'lxd'的成员，则可以运行：
      </font></font></p>
<div class="screen"><pre class="contents "><span class="cmd command"><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
adduser joe lxd</font></font><font></font>
</span>
</pre></div>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      作为根改变它。</font><font style="vertical-align: inherit;">新成员资格将在下次登录时生效，或者在现有登录名中运行“newgrp lxd”后生效。
      </font></font></p>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      有关服务器，容器，配置文件和设备配置的更多信息，请参阅随源代码提供的最终配置，可</font><a href="https://github.com/lxc/lxd/blob/master/doc/configuration.md" class="ulink" title="https://github.com/lxc/lxd/blob/master/doc/configuration.md"><font style="vertical-align: inherit;">在线</font></a><font style="vertical-align: inherit;">找到</font></font><a href="https://github.com/lxc/lxd/blob/master/doc/configuration.md" class="ulink" title="https://github.com/lxc/lxd/blob/master/doc/configuration.md"><font style="vertical-align: inherit;"></font></a>
      </p>
</div></div>
</div></div>
<div class="sect2 sect" id="lxd-first-container"><div class="inner">
<div class="hgroup"><h2 class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 创建第一个容器 </font></font></h2></div>
<div class="region">
<div class="contents"><p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      本节将介绍最简单的容器任务。
      </font></font></p></div>
<div class="sect3 sect"><div class="inner">
<div class="hgroup"><h3 class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 创建容器 </font></font></h3></div>
<div class="region"><div class="contents">
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        每个新容器都是基于映像，现有容器或容器快照创建的。</font><font style="vertical-align: inherit;">在安装时，LXD配置了以下映像服务器：
        </font></font></p>
<div class="list itemizedlist"><ul class="list itemizedlist">
<li class="list itemizedlist">
            <p class="para"><span class="file filename"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ubuntu</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：这是官方的Ubuntu服务器云映像版本。</font></font></p>
          </li>
<li class="list itemizedlist">
            <p class="para"><span class="file filename"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ubuntu-daily</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：这是日常开发版本的官方Ubuntu服务器云图像。</font></font></p>
          </li>
<li class="list itemizedlist">
            <p class="para"><span class="file filename"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">images</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">：这是images.linuxcontainers.org的默认安装别名。</font><font style="vertical-align: inherit;">这是使用LXC'下载'模板使用的相同图像构建的经典lxc图像。</font><font style="vertical-align: inherit;">这包括各种发行版和最小的定制Ubuntu映像。</font><font style="vertical-align: inherit;">这不是Ubuntu映像的推荐服务器。</font></font></p>
          </li>
</ul></div>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        创建和启动容器的命令是
        </font></font></p>
<div class="screen"><pre class="contents "><span class="cmd command"><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lxc启动remote：image containername</font></font><font></font>
</span>
</pre></div>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        图像由其哈希标识，但也有别名。</font><font style="vertical-align: inherit;">'ubuntu'服务器知道许多别名，例如'16 .04'和'xenial'。</font><font style="vertical-align: inherit;">可以使用以下命令查看Ubuntu Server中可用的所有映像的列表：
      </font></font></p>
<div class="screen"><pre class="contents "><span class="cmd command"><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lxc图片列表ubuntu：</font></font><font></font>
</span>
</pre></div>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要查看有关特定图像的更多信息，包括其所知的所有别名，您可以使用：
      </font></font></p>
<div class="screen"><pre class="contents "><span class="cmd command"><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lxc图像信息ubuntu：xenial</font></font><font></font>
</span>
</pre></div>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        您通常可以使用版本名称（'xenial'）或版本号（16.04）来引用Ubuntu映像。</font><font style="vertical-align: inherit;">此外，'lts'是最新支持的LTS版本的别名。</font><font style="vertical-align: inherit;">要选择其他体系结构，您可以指定所需的体系结构：
      </font></font></p>
<div class="screen"><pre class="contents "><span class="cmd command"><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lxc image info ubuntu：lts / arm64</font></font><font></font>
</span>
</pre></div>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        现在，让我们开始我们的第一个容器：
      </font></font></p>
<div class="screen"><pre class="contents "><span class="cmd command"><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lxc启动ubuntu：xenial x1</font></font><font></font>
</span>
</pre></div>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        这将下载当前架构的官方当前Xenial云映像，然后使用该映像创建容器，最后启动它。</font><font style="vertical-align: inherit;">命令返回后，您可以使用以下命令查看：
      </font></font></p>
<div class="screen"><pre class="contents "><span class="cmd command"><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lxc列表</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lxc info x1</font></font><font></font>
</span>
</pre></div>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        并使用以下方法在其中打开shell：
      </font></font></p>
<div class="screen"><pre class="contents "><span class="cmd command"><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lxc exec x1 bash</font></font><font></font>
</span>
</pre></div>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        try-it页面提供了可用于管理容器的命令的完整概要。
      </font></font></p>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        现在已经下载了“xenial”图像，它将保持同步，直到没有基于它创建新容器（默认情况下）为10天。</font><font style="vertical-align: inherit;">之后，它将被删除。
      </font></font></p>
</div></div>
</div></div>
</div>
</div></div>
<div class="sect2 sect" id="lxd-server-config"><div class="inner">
<div class="hgroup"><h2 class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> LXD服务器配置 </font></font></h2></div>
<div class="region">
<div class="contents">
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        默认情况下，LXD是套接字激活的，并配置为仅侦听本地UNIX套接字。</font><font style="vertical-align: inherit;">虽然当您第一次查看进程列表时LXD可能没有运行，但任何LXC命令都会启动它。</font><font style="vertical-align: inherit;">例如：
      </font></font></p>
<div class="screen"><pre class="contents "><span class="cmd command"><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lxc列表</font></font><font></font>
</span>
</pre></div>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        这将创建您的客户端证书并联系LXD服务器以获取容器列表。</font><font style="vertical-align: inherit;">要使服务器可通过网络访问，您可以使用以下命令设置http端口：
      </font></font></p>
<div class="screen"><pre class="contents "><span class="cmd command"><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lxc config set core.https_address：8443</font></font><font></font>
</span>
</pre></div>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        这将告诉LXD在所有地址上侦听端口8843。
      </font></font></p>
</div>
<div class="sect3 sect"><div class="inner">
<div class="hgroup"><h3 class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 认证</font></font></h3></div>
<div class="region"><div class="contents">
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        默认情况下，LXD将允许组'lxd'的所有成员（默认情况下包括组admin的所有成员）通过UNIX套接字与它通信。</font><font style="vertical-align: inherit;">使用服务器和客户端证书授权通过网络进行通信。
      </font></font></p>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在客户端c1希望使用远程r1之前，必须使用以下命令注册r1：
      </font></font></p>
<div class="screen"><pre class="contents "><span class="cmd command"><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lxc remote add r1 r1.example.com:8443</font></font><font></font>
</span>
</pre></div>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        将显示r1证书的指纹，以允许c1处的用户拒绝虚假证书。</font><font style="vertical-align: inherit;">服务器将依次以两种方式之一验证c1是否可信任。</font><font style="vertical-align: inherit;">第一种是事先从任何已注册的客户注册，使用：
      </font></font></p>
<div class="screen"><pre class="contents "><span class="cmd command"><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lxc config trust add r1 certfile.crt</font></font><font></font>
</span>
</pre></div>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        现在，当客户端将r1添加为已知远程时，它不需要提供密码，因为服务器已经信任该密码。
      </font></font></p>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        另一种是使用r1配置'信任密码'，在初始配置时使用'lxd init'，或者在事实使用之后
      </font></font></p>
<div class="screen"><pre class="contents "><span class="cmd command"><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lxc config set core.trust_password PASSWORD</font></font><font></font>
</span>
</pre></div>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        当客户端将r1注册为已知远程时，可以提供密码。
      </font></font></p>
</div></div>
</div></div>
<div class="sect3 sect"><div class="inner">
<div class="hgroup"><h3 class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 支持商店 </font></font></h3></div>
<div class="region"><div class="contents">
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LXD支持多个后备存储。</font><font style="vertical-align: inherit;">推荐的后备存储是ZFS，但并非所有平台都可用。</font><font style="vertical-align: inherit;">支持的后备存储包括：
      </font></font></p>
<div class="list itemizedlist"><ul class="list itemizedlist">
<li class="list itemizedlist">
        <p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          ext4：这是默认设置，也是最容易使用的。</font><font style="vertical-align: inherit;">使用ext4后备存储，容器和映像只是作为目录存储在主机文件系统中。</font><font style="vertical-align: inherit;">启动新容器需要复制整个文件系统，10个容器占用的容量是一个容器的10倍。
        </font></font></p>
      </li>
<li class="list itemizedlist">
        <p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          ZFS：如果您的架构支持ZFS（amd64，arm64或ppc64le），您可以设置LXD以使用'lxd init'来使用它。</font><font style="vertical-align: inherit;">如果已配置ZFS池，则可以通过设置zfs_pool_name配置密钥来告知LXD使用它：
        </font></font></p>

<div class="screen"><pre class="contents "><span class="cmd command"><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lxc config set storage.zfs_pool_name lxd</font></font><font></font>
</span>
</pre></div>

        <p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          使用ZFS，启动新容器很快，因为文件系统作为映像文件系统的写入克隆的副本启动。</font><font style="vertical-align: inherit;">请注意，除非容器具有特权（请参阅下文），否则LXD将需要在容器启动之前更改所有文件的所有权，但这很快并且几乎不会更改实际的文件系统数据。
        </font></font></p>
      </li>
<li class="list itemizedlist">
        <p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          Btrfs：btrfs可以使用许多与ZFS相同的优点。</font><font style="vertical-align: inherit;">要将BTRFS用作LXD后备存储，只需在</font></font><span class="file filename"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ var / lib / lxd</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下安装Btrfs文件系统</font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">每当启动新容器或快照容器时，LXD都会检测到这一点并利用Btrfs子卷功能。
        </font></font></p>
      </li>
<li class="list itemizedlist">
        <p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          LVM：要使用名为“lxd”的LVM卷组，您可以使用命令告诉LXD将其用于容器和映像
        </font></font></p>

<div class="screen"><pre class="contents "><span class="cmd command"><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
	lxc config set storage.lvm_vg_name lxd</font></font><font></font>
</span>
</pre></div>

        <p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          启动新容器时，其rootfs将作为lv克隆启动。</font><font style="vertical-align: inherit;">它会立即安装，以便可以移动文件uid，然后卸载。</font><font style="vertical-align: inherit;">容器快照也会创建为lv快照。
        </font></font></p>
      </li>
</ul></div>
</div></div>
</div></div>
</div>
</div></div>
<div class="sect2 sect" id="lxd-container-config"><div class="inner">
<div class="hgroup"><h2 class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 容器配置 </font></font></h2></div>
<div class="region"><div class="contents">
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        容器根据一组配置文件（在下一节中描述）和一组特定于容器的配置进行配置。</font><font style="vertical-align: inherit;">首先应用配置文件，以便特定于容器的配置可以覆盖配置文件配置。
      </font></font></p>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        容器配置包括体系结构，资源限制（如CPU和RAM），安全性详细信息（包括apparmor限制覆盖）和要应用于容器的设备等属性。
      </font></font></p>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        设备可以是多种类型，包括UNIX字符，UNIX块，网络接口或“磁盘”。</font><font style="vertical-align: inherit;">为了将主机安装插入容器，将使用“磁盘”设备类型。</font><font style="vertical-align: inherit;">例如，要在/ opt中挂载/选择容器c1，您可以使用：
      </font></font></p>
<div class="screen"><pre class="contents "><span class="cmd command"><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lxc config device添加c1 opt disk source = / opt path = opt</font></font><font></font>
</span>
</pre></div>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        看到：
      </font></font></p>
<div class="screen"><pre class="contents "><span class="cmd command"><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lxc help config</font></font><font></font>
</span>
</pre></div>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        有关编辑容器配置的更多信息。</font><font style="vertical-align: inherit;">您也可以使用：
      </font></font></p>
<div class="screen"><pre class="contents "><span class="cmd command"><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lxc config edit c1</font></font><font></font>
</span>
</pre></div>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在您指定的$ EDITOR中编辑整个c1的配置。</font><font style="vertical-align: inherit;">配置顶部的注释将显示正确语法的示例，以帮助管理员实现运行。</font><font style="vertical-align: inherit;">如果在退出$ EDITOR时编辑的配置无效，则将重新启动$ EDITOR。
      </font></font></p>
</div></div>
</div></div>
<div class="sect2 sect" id="lxd-profiles"><div class="inner">
<div class="hgroup"><h2 class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 简介 </font></font></h2></div>
<div class="region"><div class="contents">
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
      配置文件是命名的配置集合，可以应用于多个容器。</font><font style="vertical-align: inherit;">例如，默认情况下，使用“lxc launch”创建的所有容器都包含“default”配置文件，该配置文件提供网络接口“eth0”。
      </font></font></p>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要屏蔽将从配置文件继承但不应位于最终容器中的设备，请使用相同名称但类型为“none”的设备定义：
      </font></font></p>
<div class="screen"><pre class="contents "><span class="cmd command"><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lxc config device添加c1 eth1 none</font></font><font></font>
</span>
</pre></div>
</div></div>
</div></div>
<div class="sect2 sect" id="lxd-nesting"><div class="inner">
<div class="hgroup"><h2 class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 嵌套 </font></font></h2></div>
<div class="region">
<div class="contents">
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        容器都共享相同的主机内核。</font><font style="vertical-align: inherit;">这意味着，暴露于容器的功能与恶意容器的主机安全性之间始终存在固有的权衡。</font><font style="vertical-align: inherit;">因此，默认情况下，容器受限于嵌套子容器所需的功能。</font><font style="vertical-align: inherit;">要在lxd容器下运行lxc或lxd容器，必须将'security.nesting'功能设置为true：
      </font></font></p>
<div class="screen"><pre class="contents "><span class="cmd command"><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lxc config set container1 security.nesting true</font></font><font></font>
</span>
</pre></div>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        完成后，container1将能够启动子容器。
      </font></font></p>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        为了在非特权容器下运行非特权（LXD中的默认值）容器，您需要确保足够宽的UID映射。</font><font style="vertical-align: inherit;">请参阅下面的“UID映射”部分。
      </font></font></p>
</div>
<div class="sect3 sect"><div class="inner">
<div class="hgroup"><h3 class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 搬运工人 </font></font></h3></div>
<div class="region"><div class="contents">
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        为了便于在LXD容器内运行docker容器，提供了“docker”配置文件。</font><font style="vertical-align: inherit;">要使用docker配置文件启动新容器，您可以运行：
      </font></font></p>
<div class="screen"><pre class="contents "><span class="cmd command"><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lxc启动xenial container1 -p default -p docker</font></font><font></font>
</span>
</pre></div>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        请注意，目前Ubuntu 16.04中的docker软件包已经过修补，以便于在容器中运行。</font><font style="vertical-align: inherit;">预计这种支持将很快落在上游。
      </font></font></p>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        请注意，还需要“cgroup namespace”支持。</font><font style="vertical-align: inherit;">这在16.04内核以及4.6上游源中可用。
      </font></font></p>
</div></div>
</div></div>
</div>
</div></div>
<div class="sect2 sect" id="lxd-limits"><div class="inner">
<div class="hgroup"><h2 class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 范围 </font></font></h2></div>
<div class="region"><div class="contents">
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        LXD支持容器可以使用的资源的灵活约束。</font><font style="vertical-align: inherit;">限制有以下几类：
      </font></font></p>
<div class="list itemizedlist"><ul class="list itemizedlist">
<li class="list itemizedlist">
          <p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">CPU：以多种方式限制容器可用的cpu。</font></font></p>
        </li>
<li class="list itemizedlist">
          <p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">磁盘：配置负载下的I / O请求的优先级</font></font></p>
        </li>
<li class="list itemizedlist">
          <p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">RAM：配置内存和交换可用性</font></font></p>
        </li>
<li class="list itemizedlist">
          <p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">网络：在负载下配置网络优先级</font></font></p>
        </li>
<li class="list itemizedlist">
          <p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">进程：限制容器中的并发进程数。</font></font></p>
        </li>
</ul></div>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        有关LXD已知限制的完整列表，请参阅
         </font></font><a href="https://github.com/lxc/lxd/blob/master/doc/configuration.md" class="ulink" title="https://github.com/lxc/lxd/blob/master/doc/configuration.md"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        配置文档</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p>
</div></div>
</div></div>
<div class="sect2 sect" id="lxd-uid"><div class="inner">
<div class="hgroup"><h2 class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> UID映射和特权容器 </font></font></h2></div>
<div class="region"><div class="contents">
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        默认情况下，LXD会创建非特权容器。</font><font style="vertical-align: inherit;">这意味着容器中的root是主机上的非root UID。</font><font style="vertical-align: inherit;">它对容器拥有的资源具有特权，但对主机没有特权，在容器中生成root，大致相当于主机上的非特权用户。</font><font style="vertical-align: inherit;">（主要的例外是通过系统调用接口暴露的攻击面增加）
      </font></font></p>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        简而言之，在一个无特权的容器中，65536个UID被“移动”到容器中。</font><font style="vertical-align: inherit;">例如，容器中的UID 0在主机上可能是100000，容器中的UID 1是100001等，最多可达165535.UID和GID的起始值分别由'root'条目确定
         </font></font><span class="file filename"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ etc / subuid</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">和</font></font><span class="file filename"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ etc / subgid</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">文件。</font><font style="vertical-align: inherit;">（参见
         </font></font><a href="http://manpages.ubuntu.com/manpages/xenial/en/man5/subuid.5.html" class="ulink" title="http://manpages.ubuntu.com/manpages/xenial/en/man5/subuid.5.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        subuid（5）手册页</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        通过将security.privileged标志设置为true，可以请求容器在没有UID映射的情况下运行：
      </font></font></p>
<div class="screen"><pre class="contents "><span class="cmd command"><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lxc config set c1 security.privileged true</font></font><font></font>
</span>
</pre></div>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        但请注意，在这种情况下，容器中的root用户是主机上的root用户。
      </font></font></p>
</div></div>
</div></div>
<div class="sect2 sect" id="lxd-aa"><div class="inner">
<div class="hgroup"><h2 class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> AppArmor的 </font></font></h2></div>
<div class="region"><div class="contents">
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        默认情况下，LXD使用apparmor配置文件限制容器，该配置文件保护容器彼此之间以及容器中的主机。</font><font style="vertical-align: inherit;">例如，这将阻止一个容器中的root用户在另一个容器中发信号通知root，即使它们具有相同的uid映射。</font><font style="vertical-align: inherit;">它还可以防止写入危险的，未命名空间的文件，例如许多sysctls和
         </font></font><span class="file filename"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ proc / sysrq-trigger</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        如果需要为容器c1修改容器的apparmor策略，则可以在“raw.apparmor”配置键中添加特定的apparmor策略行。
      </font></font></p>
</div></div>
</div></div>
<div class="sect2 sect" id="lxd-seccomp"><div class="inner">
<div class="hgroup"><h2 class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 的Seccomp </font></font></h2></div>
<div class="region"><div class="contents"><p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        所有容器都受默认的seccomp策略限制。</font><font style="vertical-align: inherit;">此策略可防止某些危险操作，例如强制卸载，内核模块加载和卸载，kexec以及open_by_handle_at系统调用。</font><font style="vertical-align: inherit;">无法修改seccomp配置，但可以使用raw.lxc（请参阅下文）请求完全不同的seccomp策略（或无）。
      </font></font></p></div></div>
</div></div>
<div class="sect2 sect"><div class="inner">
<div class="hgroup"><h2 class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 原始LXC配置 </font></font></h2></div>
<div class="region"><div class="contents"><p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        LXD配置容器以实现主机安全性和容器可用性的最佳平衡。</font><font style="vertical-align: inherit;">只要有可能，强烈建议使用默认值，并使用LXD配置键请求LXD根据需要进行修改。</font><font style="vertical-align: inherit;">但是，有时可能需要与底层的lxc驱动程序本身进行通信。</font><font style="vertical-align: inherit;">这可以通过在'raw.lxc'LXD配置键中指定LXC配置项来完成。</font><font style="vertical-align: inherit;">这些必须是有效的项目，如
         </font></font><a href="http://manpages.ubuntu.com/manpages/xenial/en/man5/lxc.container.conf.5.html" class="ulink" title="http://manpages.ubuntu.com/manpages/xenial/en/man5/lxc.container.conf.5.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        lxc.container.conf（5）手册页中所述</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。
      </font></font></p></div></div>
</div></div>
<div class="sect2 sect"><div class="inner">
<div class="hgroup"><h2 class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 图像和容器 </font></font></h2></div>
<div class="region">
<div class="contents">
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
LXD是基于图像的。</font><font style="vertical-align: inherit;">创建第一个容器时，通常使用现有图像。</font><font style="vertical-align: inherit;">LXD预先配置了三个默认图像遥控器：
      </font></font></p>
<div class="list itemizedlist"><ul class="list itemizedlist">
<li class="list itemizedlist">
          <p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ubuntu：这是一个</font></font><a href="https://launchpad.net/simplestreams" class="ulink" title="https://launchpad.net/simplestreams"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">基于simplestreams的</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
          远程服务发布的ubuntu云图像。</font></font></p>
        </li>
<li class="list itemizedlist">
          <p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">ubuntu-daily：这是另一个基于简单流的遥控器，它提供“每日”ubuntu云图像。</font><font style="vertical-align: inherit;">这些提供更快但可能不太稳定的图像。</font></font></p>
        </li>
<li class="list itemizedlist">
          <p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">images：这是使用社区提供的构建脚本创建的许多发行版的远程发布尽力而为容器映像。</font></font></p>
        </li>
</ul></div>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要查看其中一台服务器上可用的映像，您可以使用：
      </font></font></p>
<div class="screen"><pre class="contents "><span class="cmd command"><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lxc图片列表ubuntu：</font></font><font></font>
</span>
</pre></div>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        大多数图像都是由几个别名知道的，以便于参考。</font><font style="vertical-align: inherit;">要查看别名的完整列表，您可以使用
      </font></font></p>
<div class="screen"><pre class="contents "><span class="cmd command"><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lxc图像别名列表图像：</font></font><font></font>
</span>
</pre></div>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        任何别名或图像指纹都可用于指定如何创建新容器。</font><font style="vertical-align: inherit;">例如，要创建amd64 Ubuntu 14.04容器，一些选项是：
      </font></font></p>
<div class="screen"><pre class="contents "><span class="cmd command"><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lxc启动ubuntu：14.04 trusty1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lxc启动ubuntu：trusty trusty1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lxc启动ubuntu：trusty / amd64 trusty1</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lxc启动ubuntu：lts trusty1</font></font><font></font>
</span>
</pre></div>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        'lts'别名总是指最新发布的LTS图像。
      </font></font></p>
</div>
<div class="sect3 sect"><div class="inner">
<div class="hgroup"><h3 class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 快照 </font></font></h3></div>
<div class="region"><div class="contents">
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          可以使用'lxc move'命令重命名容器并进行实时迁移：
        </font></font></p>
<div class="screen"><pre class="contents "><span class="cmd command"><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lxc移动c1 final-beta</font></font><font></font>
</span>
</pre></div>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          它们也可以快照：
        </font></font></p>
<div class="screen"><pre class="contents "><span class="cmd command"><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lxc snapshot c1 YYYY-MM-DD</font></font><font></font>
</span>
</pre></div>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          然后可以通过恢复快照来恢复对c1的更改：
        </font></font></p>
<div class="screen"><pre class="contents "><span class="cmd command"><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lxc恢复u1 YYYY-MM-DD</font></font><font></font>
</span>
</pre></div>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          也可以通过复制容器或快照来创建新容器：
        </font></font></p>
<div class="screen"><pre class="contents "><span class="cmd command"><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lxc copy u1 / YYYY-MM-DD testcontainer</font></font><font></font>
</span>
</pre></div>
</div></div>
</div></div>
<div class="sect3 sect"><div class="inner">
<div class="hgroup"><h3 class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 发布图像 </font></font></h3></div>
<div class="region"><div class="contents">
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          当容器或容器快照准备好供他人使用时，可以使用以下方式将其发布为新映像;
        </font></font></p>
<div class="screen"><pre class="contents "><span class="cmd command"><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lxc发布u1 / YYYY-MM-DD --alias foo-2.0</font></font><font></font>
</span>
</pre></div>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          默认情况下，发布的映像将是私有的，这意味着LXD将不允许没有可信证书的客户端看到它们。</font><font style="vertical-align: inherit;">如果图像对公众查看是安全的（即不包含私人信息），则可以在发布时使用“公共”标志设置
        </font></font></p>
<div class="screen"><pre class="contents "><span class="cmd command"><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lxc发布u1 / YYYY-MM-DD --alias foo-2.0 public = true</font></font><font></font>
</span>
</pre></div>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          或事后使用
        </font></font></p>
<div class="screen"><pre class="contents "><span class="cmd command"><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lxc image edit foo-2.0</font></font><font></font>
</span>
</pre></div>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          并改变公共领域的价值。
        </font></font></p>
</div></div>
</div></div>
<div class="sect3 sect"><div class="inner">
<div class="hgroup"><h3 class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 图像导出和导入 </font></font></h3></div>
<div class="region"><div class="contents">
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          图像可以导出为tarball并从中导入：
        </font></font></p>
<div class="screen"><pre class="contents "><span class="cmd command"><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lxc image export foo-2.0 foo-2.0.tar.gz</font></font><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lxc image import foo-2.0.tar.gz --alias foo-2.0 --public</font></font><font></font>
</span>
</pre></div>
</div></div>
</div></div>
</div>
</div></div>
<div class="sect2 sect" id="lxd-troubleshooting"><div class="inner">
<div class="hgroup"><h2 class="title"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 故障排除 </font></font></h2></div>
<div class="region"><div class="contents">
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        要查看有关LXD本身的调试信息，请在基于systemd的主机上使用
      </font></font></p>
<div class="screen"><pre class="contents "><span class="cmd command"><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
journalctl -u lxd</font></font><font></font>
</span>
</pre></div>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        在基于Upstart的系统上，您可以在</font></font><span class="file filename"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/var/log/upstart/lxd.log中</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">找到该日志
         </font><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">为了使LXD提供有关其服务请求的更多信息，请将“--debug”添加到LXD的参数中。</font><font style="vertical-align: inherit;">在systemd，追加'--debug'在'ExecStart ='线</font></font><span class="file filename"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/lib/systemd/system/lxd.service</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">在Upstart中，将它附加到</font><span class="file filename"><font style="vertical-align: inherit;">/etc/init/lxd.conf中</font></span><font style="vertical-align: inherit;">的</font></font><span class="cmd command"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">exec / usr / bin / lxd</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">行
         </font><font style="vertical-align: inherit;">。
      </font></font><span class="file filename"><font style="vertical-align: inherit;"></font></span><font style="vertical-align: inherit;"></font></p>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        可以使用以下内容查看容器c1的容器日志文件：
      </font></font></p>
<div class="screen"><pre class="contents "><span class="cmd command"><font></font><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
lxc info c1 --show-log</font></font><font></font>
</span>
</pre></div>
<p class="para"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
        使用的配置文件可以在</font></font><span class="file filename"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/var/log/lxd/c1/lxc.conf</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下找到，</font><font style="vertical-align: inherit;">
        而apparmor配置文件可以在</font></font><span class="file filename"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ var / lib / lxd / security / apparmor / profiles / c1</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> 
        和</font></font><span class="file filename"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">/ var /中的</font></font></span><font style="vertical-align: inherit;"><font style="vertical-align: inherit;"> seccomp配置文件中找到</font><span class="file filename"><font style="vertical-align: inherit;">lib / lxd / security / seccomp / c1</font></span><font style="vertical-align: inherit;">。
      </font></font></p>
</div></div>
</div></div>
</div>
<div class="links nextlinks">
<a class="nextlinks-prev" href="ubuntucloud.html" title="Ubuntu Cloud"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">上一页</font></font></a><a class="nextlinks-next" href="lxc.html" title="LXC"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">下一页</font></font></a>
</div>
<div class="clear"></div>
</div>
<div id="pagebottom"></div>
</div></div>
</div>
<div id="footer"><p><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">本文档中的资料可在免费许可下获得，</font><font style="vertical-align: inherit;">有关详细信息</font><font style="vertical-align: inherit;">，请参阅</font></font><a href="https://help.ubuntu.com/legal.html"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Legal</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font></font><br><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">
          有关贡献的信息，请参阅</font></font><a href="https://wiki.ubuntu.com/DocumentationTeam"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">Ubuntu文档团队Wiki页面</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">。</font><font style="vertical-align: inherit;">要报告此serverguide文档中</font></font><a href="https://bugs.launchpad.net/serverguide"><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">的错误</font></font></a><font style="vertical-align: inherit;"><font style="vertical-align: inherit;">，请</font><a href="https://bugs.launchpad.net/serverguide"><font style="vertical-align: inherit;">提交错误报告</font></a><font style="vertical-align: inherit;">。</font></font></p></div>
</div><div id="goog-gt-tt" class="skiptranslate" dir="ltr"><div style="padding: 8px;"><div><div class="logo"><img src="https://www.gstatic.com/images/branding/product/1x/translate_24dp.png" width="20" height="20" alt="Google 翻译"></div></div></div><div class="top" style="padding: 8px; float: left; width: 100%;"><h1 class="title gray">原文</h1></div><div class="middle" style="padding: 8px;"><div class="original-text"></div></div><div class="bottom" style="padding: 8px;"><div class="activity-links"><span class="activity-link">提供更好的翻译建议</span><span class="activity-link"></span></div><div class="started-activity-container"><hr style="color: #CCC; background-color: #CCC; height: 1px; border: none;"><div class="activity-root"></div></div></div><div class="status-message" style="display: none;"></div></div>


<div class="goog-te-spinner-pos"><div class="goog-te-spinner-animation"><svg xmlns="http://www.w3.org/2000/svg" class="goog-te-spinner" width="96px" height="96px" viewBox="0 0 66 66"><circle class="goog-te-spinner-path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle></svg></div></div></body></html>